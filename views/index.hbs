<div class=" jumbotron ">
    <h1>{{title}}</h1>
    <h5>Developed by {{user}}</h5>
    <hr>
    <div class="row">
        <div class="col-12">
            <h1>Saving in the database</h1>
            <form action="/send" method="post">
                <div class="row">
                    <input class="form-control col-xs-12 col-sm-12 col-md-3 m-1" type="text" name="imgTitle"
                        placeholder="Image Title" required>
                    <input class="form-control col-xs-12 col-sm-12 col-md-3 m-1" type="text" name="imgDescription"
                        placeholder="Image Title" required>
                    <input class="form-control col-xs-12 col-sm-12 col-md-3 m-1" type="text" name="url" placeholder="Type the URL**"
                        required>
                    <input class="btn btn-primary col-xm-12 col-sm-12 col-md-2 m-1" type="submit" value="Upload" data-toggle="modal" data-target="#insertingModal">
                    <p class="ml-2">**URL from cloudinary repository</p>
                </div>
            </form>
            <hr>


            <h1>Deleting from the Database</h1>
            <form action="/delete" method="post">
                <div class="row mb-2">
                    <input class="form-control col-xs-12 col-sm-12 col-md-6" type="text" name="imgTitleToDelete"
                        placeholder="Item name" required>
                    <input class="btn btn-danger col-xs-12 col-sm-12 col-md-2" type="submit" value="Delete" data-toggle="modal" data-target="#deletingModal">
                </div>
            </form>
        </div>
        {{!-- read and show data on Dom --}}
        <div class="text-center col-xs-12 col-sm-12 col-md-6">
            <h1 class="text-center db-fields">Database</h1>
            <div class="row">
                <h4 class="col-6 db-fields">Title</h4>
                <h4 class="col-6 db-fields">URL</h4>
            </div>
            <div class="row">
                {{#each readDb}}
                <h4 class="col-4 db-fields">{{title}}</h4>
                {{!-- <h4 class="col-4 db-fields">{{description}}</h4> --}}
                <h4 class="col-8 db-fields">{{url}}</h4>
                {{/each}}
            </div>
        </div>
    </div>
            <p class="display-4">Image api</p>
            {{#each readDb}}
                <img class="col-xm-12 col-sm-12 col-md-3 db-fields img-test" src="{{url}}"></h4>
            {{/each}}
    <p class="mt-3 p-2 bg-info text-white bd">Disclaimer - There's a setTimeOut function after deleting/inserting data
        into the database, in case the database viewer doesn't refresh by itself please refresh the page.</p>
</div>
</div>
            
<!-- Deleting Modal -->
<div class="modal fade" id="deletingModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Deleting Data...</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
         <div class="wrapper">
          <div class="progress"></div>
        </div> 
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Okay</button>
      </div>
    </div>
  </div>
</div>

<!-- Inserting Modal -->
<div class="modal fade" id="insertingModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Inserting Data...</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
         <div class="wrapper">
          <div class="progress"></div>
        </div> 
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Okay</button>
      </div>
    </div>
  </div>
</div>

{{!-- <button id="upload_widget" class="cloudinary-button">Upload files</button> --}}
<script type="text/javascript">  

var myWidget = cloudinary.createUploadWidget({
  cloudName: 'rickfurt', 
  uploadPreset: 'ynocuwhx'}, (error, result) => { 
    if (!error && result && result.event === "success") { 
      console.log('Done! Here is the image info: ', result.info); 
    }
  }
)

document.getElementById("upload_widget").addEventListener("click", function(){
    myWidget.open();
  }, false);
</script>